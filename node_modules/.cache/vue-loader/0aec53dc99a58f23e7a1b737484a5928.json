{"remainingRequest":"C:\\teste-login\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\teste-login\\src\\views\\List.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\teste-login\\src\\views\\List.vue","mtime":1714423561827},{"path":"C:\\teste-login\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713973011099},{"path":"C:\\teste-login\\node_modules\\babel-loader\\lib\\index.js","mtime":1713973011327},{"path":"C:\\teste-login\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713973011099},{"path":"C:\\teste-login\\node_modules\\vue-loader\\lib\\index.js","mtime":1713973005773}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBUYXNrc01vZGVsIGZyb20gIkAvbW9kZWxzL1Rhc2tzTW9kZWwiOwppbXBvcnQgU3RhdHVzIGZyb20gIkAvdmFsdWVPYmplY3RzL3N0YXR1cyI7CmltcG9ydCBUb2FzdE1peGluIGZyb20gIkAvbWl4aW5zL3RvYXN0TWl4aW4uanMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMaXN0IiwKCiAgbWl4aW5zOiBbVG9hc3RNaXhpbl0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YXNrczogW10sCiAgICAgIHRhc2tTZWxlY3RlZDogW10sCiAgICAgIHN0YXR1czogU3RhdHVzLAogICAgICBmaWx0ZXI6IHsKICAgICAgICBzdWJqZWN0OiBudWxsLAogICAgICAgIHN0YXR1czogbnVsbCwKICAgICAgfSwKICAgICAgb3B0aW9uc0xpc3Q6IFsKICAgICAgICB7IHZhbHVlOiBudWxsLCB0ZXh0OiAiU2VsZWNpb25lIGFsZ3VtIHN0YXR1cyIgfSwKICAgICAgICB7IHZhbHVlOiBTdGF0dXMuT1BFTiwgdGV4dDogIkFiZXJ0byIgfSwKICAgICAgICB7IHZhbHVlOiBTdGF0dXMuRklOSVNIRUQsIHRleHQ6ICJDb25jbHXDrWRvIiB9LAogICAgICAgIHsgdmFsdWU6IFN0YXR1cy5BUkNISVZFRCwgdGV4dDogIkFycXVpdmFkbyIgfSwKICAgICAgXSwKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgc3RhdHVzTGlzdDogW1N0YXR1cy5PUEVOLCBTdGF0dXMuRklOSVNIRURdLAogICAgfTsKICB9LAoKICBhc3luYyBjcmVhdGVkKCkgewogICAgdGhpcy50YXNrcyA9IGF3YWl0IHRoaXMuZ2V0VGFza3MoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBlZGl0KHRhc2tJZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJmb3JtIiwgcGFyYW1zOiB7IHRhc2tJZCB9IH0pOwogICAgfSwKCiAgICBhc3luYyByZW1vdmUodGFza0lkKSB7CiAgICAgIHRoaXMudGFza1NlbGVjdGVkID0gYXdhaXQgVGFza3NNb2RlbC5maW5kKHRhc2tJZCk7CiAgICAgIHRoaXMuJHJlZnMubW9kYWxSZW1vdmUuc2hvdygpOwogICAgfSwKCiAgICBoaWRlTW9kYWwoKSB7CiAgICAgIHRoaXMuJHJlZnMubW9kYWxSZW1vdmUuaGlkZSgpOwogICAgfSwKCiAgICBhc3luYyBjb25maXJtUmVtb3ZlVGFzaygpIHsKICAgICAgdGhpcy50YXNrU2VsZWN0ZWQuZGVsZXRlKCk7CiAgICAgIHRoaXMudGFza3MgPSBhd2FpdCB0aGlzLmdldFRhc2tzKCk7CiAgICAgIHRoaXMuaGlkZU1vZGFsKCk7CiAgICB9LAoKICAgIGFzeW5jIGNhcnJhZ2F0cmFjayh0YXNrSWQpIHsKCiAgICAgIHRoaXMuc2hvd1RvYXN0KAogICAgICAgICJzdWNjZXNzIiwKICAgICAgICAiQWJyaW5kbyBwbGF5ZXIhIiwKICAgICAgICAiQ2FycmVnYW5kbyBzdWEgdHJpbGhhIgogICAgICApOwogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGBodHRwOi8vbG9jYWxob3N0OjgwODAvdHJhY2s/JHt0YXNrSWR9YDsKICAgIH0sCgoKICAgIGFzeW5jIHVwZGF0ZVN0YXR1cyh0YXNrSWQsIHN0YXR1cykgewogICAgICBsZXQgdGFzayA9IGF3YWl0IFRhc2tzTW9kZWwuZmluZCh0YXNrSWQpOwogICAgICB0YXNrLnN0YXR1cyA9IHN0YXR1czsKICAgICAgYXdhaXQgdGFzay5zYXZlKCk7CgogICAgICB0aGlzLnRhc2tzID0gYXdhaXQgdGhpcy5nZXRUYXNrcygpOwogICAgICB0aGlzLnNob3dUb2FzdCgKICAgICAgICAic3VjY2VzcyIsCiAgICAgICAgIlN1Y2Vzc28hIiwKICAgICAgICAiU3RhdHVzIGRhIHRhcmVmYSBhdHVhbGl6YWRvIGNvbSBzdWNlc28iCiAgICAgICk7CiAgICB9LAoKICAgIGlzRmluaXNoZWQodGFzaykgewogICAgICByZXR1cm4gdGFzay5zdGF0dXMgPT09IHRoaXMuc3RhdHVzLkZJTklTSEVEOwogICAgfSwKCiAgICBhc3luYyBmaWx0ZXJUYXNrcygpIHsKICAgICAgbGV0IGZpbHRlciA9IHsgLi4udGhpcy5maWx0ZXIgfTsKICAgICAgZmlsdGVyID0gdGhpcy5jbGVhbihmaWx0ZXIpOwogICAgICBmaWx0ZXIudXNlcklkID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXV0aFVzZXIiKSkuaWQ7CiAgICAgIHRoaXMudGFza3MgPSBhd2FpdCBUYXNrc01vZGVsLnBhcmFtcyhmaWx0ZXIpLmdldCgpOwogICAgfSwKCiAgICBjbGVhbihvYmopIHsKICAgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gb2JqKSB7CiAgICAgICAgaWYgKG9ialtwcm9wTmFtZV0gPT09IG51bGwgfHwgb2JqW3Byb3BOYW1lXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBkZWxldGUgb2JqW3Byb3BOYW1lXTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG9iajsKICAgIH0sCgogICAgYXN5bmMgY2xlYXJGaWx0ZXIoKSB7CiAgICAgIHRoaXMuZmlsdGVyID0gewogICAgICAgIHN1YmplY3Q6IG51bGwsCiAgICAgICAgc3RhdHVzOiBudWxsLAogICAgICB9OwogICAgICB0aGlzLnRhc2tzID0gYXdhaXQgdGhpcy5nZXRUYXNrcygpOwogICAgfSwKCiAgICBvdmVyZHVlUHJlc2VudGVyKGRhdGVPdmVyZHVlKSB7CiAgICAgIGlmICghZGF0ZU92ZXJkdWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIGRhdGVPdmVyZHVlLnNwbGl0KCItIikucmV2ZXJzZSgpLmpvaW4oIi8iKTsKICAgIH0sCgogICAgdmFyaWFudE92ZXJkdWUoZGF0ZU92ZXJkdWUsIHRhc2tTdGF0dXMpIHsKICAgICAgaWYgKCFkYXRlT3ZlcmR1ZSkgewogICAgICAgIHJldHVybiAibGlnaHQiOwogICAgICB9CgogICAgICBpZiAodGFza1N0YXR1cyA9PT0gdGhpcy5zdGF0dXMuRklOSVNIRUQpIHsKICAgICAgICByZXR1cm4gInN1Y2Nlc3MiOwogICAgICB9CgogICAgICBsZXQgZGF0ZU5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgiVCIpWzBdOwogICAgICBpZiAoZGF0ZU92ZXJkdWUgPT09IGRhdGVOb3cpIHsKICAgICAgICByZXR1cm4gIndhcm5pbmciOwogICAgICB9CgogICAgICBpZiAoZGF0ZU92ZXJkdWUgPCBkYXRlTm93KSB7CiAgICAgICAgcmV0dXJuICJkYW5nZXIiOwogICAgICB9CgogICAgICByZXR1cm4gImxpZ2h0IjsKICAgIH0sCgogICAgYXN5bmMgZ2V0VGFza3MoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgbGV0IHNlbGYgPSB0aGlzOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBzZWxmLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICB9LCAzMDAwKTsKICAgICAgcmV0dXJuIGF3YWl0IFRhc2tzTW9kZWwucGFyYW1zKHsKICAgICAgICB1c2VySWQ6IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImF1dGhVc2VyIikpLmlkLAogICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXNMaXN0LAogICAgICB9KS5nZXQoKTsKICAgIH0sCiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGlzVGFza3NFbXB0eSgpIHsKICAgICAgcmV0dXJuIHRoaXMudGFza3MubGVuZ3RoID09PSAwOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";AA2IA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container mt-2\">\n    <b-form inline class=\"mb-2\">\n      <b-form-input\n        v-model=\"filter.subject\"\n        id=\"subject\"\n        placeholder=\"pesquisar\"\n        class=\"mr-2\"\n        autocomplete=\"off\"\n      ></b-form-input>\n\n      <b-form-select\n        v-model=\"filter.status\"\n        :options=\"optionsList\"\n        class=\"mr-2\"\n      ></b-form-select>\n\n      <b-button\n        variant=\"outline-secondary\"\n        @click=\"filterTasks\"\n        class=\"mr-2\"\n        v-b-tooltip.hover\n        title=\"Buscar\"\n        ><i class=\"fas fa-search\"></i\n      ></b-button>\n\n      <b-button\n        variant=\"outline-secondary\"\n        @click=\"clearFilter\"\n        class=\"mr-2\"\n        v-b-tooltip.hover\n        title=\"Limpar filtro\"\n        ><i class=\"fas fa-times\"></i\n      ></b-button>\n    </b-form>\n\n    <template v-if=\"isLoading\">\n      <div class=\"loading-spin\">\n        <b-spinner style=\"width: 5rem; height: 5rem\"></b-spinner>\n      </div>\n    </template>\n    <template v-if=\"isTasksEmpty && !isLoading\">\n      <div class=\"empty-data mt-2\">\n        <img src=\"../assets/images/empty-data.svg\" class=\"empty-data-image\" />\n        <b-button variant=\"outline-primary\" class=\"mt-2\" size=\"lg\" to=\"/form\">\n          Criar tarefa\n        </b-button>\n      </div>\n    </template>\n    <template v-if=\"!isTasksEmpty && !isLoading\">\n      <div v-for=\"task in tasks\" :key=\"task.id\">\n        <b-card class=\"mb-2\" :class=\"{ 'finished-task': isFinished(task) }\">\n          <div class=\"d-flex justify-content-between\">\n            <b-card-title>{{ task.subject }}</b-card-title>\n\n            <span>\n              <b-badge\n                :variant=\"variantOverdue(task.dateOverdue, task.status)\"\n                >{{ overduePresenter(task.dateOverdue) }}</b-badge\n              >\n            </span>\n          </div>\n\n          <b-card-text>{{ task.description }}</b-card-text>\n\n          \n          <b-button\n            \n            variant=\"outline-primary\"\n            class=\"mr-2\"\n            @click=\"carragatrack(task.id)\"\n            v-b-tooltip.hover\n            title=\"ir\"\n            size=\"lg\"\n            >\n            <i class=\"fas fa-headphones\"></i>\n          </b-button>\n\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"updateStatus(task.id, status.FINISHED)\"\n            v-b-tooltip.hover\n            title=\"Concluir\"\n          >\n            <i class=\"fas fa-check\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"updateStatus(task.id, status.ARCHIVED)\"\n            v-b-tooltip.hover\n            title=\"Arquivar\"\n          >\n            <i class=\"fas fa-archive\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"edit(task.id)\"\n            v-b-tooltip.hover\n            title=\"Editar\"\n          >\n            <i class=\"fas fa-edit\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-danger\"\n            class=\"mr-2\"\n            @click=\"remove(task.id)\"\n            v-b-tooltip.hover\n            title=\"Excluir\"\n          >\n            <i class=\"fas fa-times\"></i>\n          </b-button>\n        </b-card>\n      </div>\n    </template>\n\n    <b-modal ref=\"modalRemove\" hide-footer title=\"Exclusão de tarefa\">\n      <div class=\"d-block text-center\">\n        Deseja realmente excluir essa tarefa? {{ taskSelected.subject }}\n      </div>\n      <div class=\"mt-3 d-flex justify-content-end\">\n        <b-button variant=\"outline-secondary\" class=\"mr-2\" @click=\"hideModal\">\n          Cancelar\n        </b-button>\n        <b-button\n          variant=\"outline-danger\"\n          class=\"mr-2\"\n          @click=\"confirmRemoveTask\"\n        >\n          Excluir\n        </b-button>\n      </div>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport TasksModel from \"@/models/TasksModel\";\nimport Status from \"@/valueObjects/status\";\nimport ToastMixin from \"@/mixins/toastMixin.js\";\n\nexport default {\n  name: \"List\",\n\n  mixins: [ToastMixin],\n\n  data() {\n    return {\n      tasks: [],\n      taskSelected: [],\n      status: Status,\n      filter: {\n        subject: null,\n        status: null,\n      },\n      optionsList: [\n        { value: null, text: \"Selecione algum status\" },\n        { value: Status.OPEN, text: \"Aberto\" },\n        { value: Status.FINISHED, text: \"Concluído\" },\n        { value: Status.ARCHIVED, text: \"Arquivado\" },\n      ],\n      isLoading: false,\n      statusList: [Status.OPEN, Status.FINISHED],\n    };\n  },\n\n  async created() {\n    this.tasks = await this.getTasks();\n  },\n\n  methods: {\n    edit(taskId) {\n      this.$router.push({ name: \"form\", params: { taskId } });\n    },\n\n    async remove(taskId) {\n      this.taskSelected = await TasksModel.find(taskId);\n      this.$refs.modalRemove.show();\n    },\n\n    hideModal() {\n      this.$refs.modalRemove.hide();\n    },\n\n    async confirmRemoveTask() {\n      this.taskSelected.delete();\n      this.tasks = await this.getTasks();\n      this.hideModal();\n    },\n\n    async carragatrack(taskId) {\n\n      this.showToast(\n        \"success\",\n        \"Abrindo player!\",\n        \"Carregando sua trilha\"\n      );\n      window.location.href = `http://localhost:8080/track?${taskId}`;\n    },\n\n\n    async updateStatus(taskId, status) {\n      let task = await TasksModel.find(taskId);\n      task.status = status;\n      await task.save();\n\n      this.tasks = await this.getTasks();\n      this.showToast(\n        \"success\",\n        \"Sucesso!\",\n        \"Status da tarefa atualizado com suceso\"\n      );\n    },\n\n    isFinished(task) {\n      return task.status === this.status.FINISHED;\n    },\n\n    async filterTasks() {\n      let filter = { ...this.filter };\n      filter = this.clean(filter);\n      filter.userId = JSON.parse(localStorage.getItem(\"authUser\")).id;\n      this.tasks = await TasksModel.params(filter).get();\n    },\n\n    clean(obj) {\n      for (var propName in obj) {\n        if (obj[propName] === null || obj[propName] === undefined) {\n          delete obj[propName];\n        }\n      }\n      return obj;\n    },\n\n    async clearFilter() {\n      this.filter = {\n        subject: null,\n        status: null,\n      };\n      this.tasks = await this.getTasks();\n    },\n\n    overduePresenter(dateOverdue) {\n      if (!dateOverdue) {\n        return;\n      }\n      return dateOverdue.split(\"-\").reverse().join(\"/\");\n    },\n\n    variantOverdue(dateOverdue, taskStatus) {\n      if (!dateOverdue) {\n        return \"light\";\n      }\n\n      if (taskStatus === this.status.FINISHED) {\n        return \"success\";\n      }\n\n      let dateNow = new Date().toISOString().split(\"T\")[0];\n      if (dateOverdue === dateNow) {\n        return \"warning\";\n      }\n\n      if (dateOverdue < dateNow) {\n        return \"danger\";\n      }\n\n      return \"light\";\n    },\n\n    async getTasks() {\n      this.isLoading = true;\n      let self = this;\n      setTimeout(function () {\n        self.isLoading = false;\n      }, 3000);\n      return await TasksModel.params({\n        userId: JSON.parse(localStorage.getItem(\"authUser\")).id,\n        status: this.statusList,\n      }).get();\n    },\n  },\n\n  computed: {\n    isTasksEmpty() {\n      return this.tasks.length === 0;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.empty-data {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.empty-data-image {\n  width: 300px;\n  height: 300px;\n}\n\n.finished-task {\n  opacity: 0.7;\n}\n\n.finished-task > .card-body > h4,\n.finished-task > .card-body > p {\n  text-decoration: line-through;\n}\n\n.loading-spin {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 65vh;\n}\n</style>\n"]}]}