{"remainingRequest":"C:\\teste-login\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\teste-login\\src\\views\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\teste-login\\src\\views\\Login.vue","mtime":1722785201950},{"path":"C:\\teste-login\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713973011099},{"path":"C:\\teste-login\\node_modules\\babel-loader\\lib\\index.js","mtime":1713973011327},{"path":"C:\\teste-login\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713973011099},{"path":"C:\\teste-login\\node_modules\\vue-loader\\lib\\index.js","mtime":1713973005773}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHJlcXVpcmVkLCBtaW5MZW5ndGgsIGVtYWlsIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsKaW1wb3J0IFVzZXJzTW9kZWwgZnJvbSAiQC9tb2RlbHMvVXNlcnNNb2RlbCI7CmltcG9ydCBUb2FzdE1peGluIGZyb20gIkAvbWl4aW5zL3RvYXN0TWl4aW4uanMiOwoKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW1RvYXN0TWl4aW5dLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTogewogICAgICAgIGVtYWlsOiAiIiwKICAgICAgICBwYXNzd29yZDogIiIKICAgICAgfQogICAgfQogIH0sCgogIHZhbGlkYXRpb25zOiB7CiAgICBmb3JtOiB7CiAgICAgIGVtYWlsOiB7CiAgICAgICAgcmVxdWlyZWQsIAogICAgICAgIGVtYWlsCiAgICAgIH0sCgogICAgICBwYXNzd29yZDogewogICAgICAgIHJlcXVpcmVkLAogICAgICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoKDYpLAogICAgICB9LAogICAgfSwKICB9LAoKICBtZXRob2RzOiB7CiAgICBhc3luYyBsb2dpbigpIHsKICAgICAgdGhpcy4kdi4kdG91Y2goKTsKICAgICAgaWYgKHRoaXMuJHYuJGVycm9yKSByZXR1cm47CgogICAgICBsZXQgdXNlciA9IGF3YWl0IFVzZXJzTW9kZWwucGFyYW1zKHtlbWFpbDogdGhpcy5mb3JtLmVtYWlsfSkuZ2V0KCk7CgogICAgICBpZighdXNlciB8fCAhdXNlclswXSB8fCAhdXNlclswXS5lbWFpbCkgewogICAgICAgIHRoaXMuc2hvd1RvYXN0KCJkYW5nZXIiLCAiRXJybyEiLCAiVXN1w6FyaW8gZS9vdSBzZW5oYSBpbmNvcnJldG9zIik7CiAgICAgICAgdGhpcy5jbGVhckZvcm0oKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHVzZXIgPSB1c2VyWzBdOwogICAgICBpZih1c2VyLnBhc3N3b3JkICE9PSB0aGlzLmZvcm0ucGFzc3dvcmQpIHsKICAgICAgICB0aGlzLnNob3dUb2FzdCgiZGFuZ2VyIiwgIkVycm8hIiwgIlVzdcOhcmlvIGUvb3Ugc2VuaGEgaW5jb3JyZXRvcyIpOwogICAgICAgIHRoaXMuY2xlYXJGb3JtKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXV0aFVzZXInLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAibGlzdCJ9KTsKICAgIH0sCgogICAgY2xlYXJGb3JtKCkgewogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIgogICAgICB9CiAgICB9LAoKICAgIGdldFZhbGlkYXRpb24oZmllbGQpIHsKICAgICAgaWYgKHRoaXMuJHYuZm9ybS4kZGlydHkgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiAhdGhpcy4kdi5mb3JtW2ZpZWxkXS4kZXJyb3I7CiAgICB9LAoKICAgIGdvVG9SZWdpc3RlcigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAicmVnaXN0ZXIiIH0pOwogICAgfQogIH0sCn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AA0DA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login-container vh-100 d-flex justify-content-center align-items-center\">\n    <div class=\"login-form p-5 rounded shadow\">\n      <div class=\"text-center mb-4\">\n        <img src=\"../assets/images/logo.png\" alt=\"Logo\" class=\"logo\">\n      </div>\n      <h2 class=\"text-center mb-4\">Login</h2>\n      <b-form>\n        <b-form-group label=\"E-mail\" label-for=\"email\">\n          <b-form-input\n            id=\"email\"\n            type=\"email\"\n            placeholder=\"seuemail@dominio.com\"\n            autocomplete=\"off\"\n            v-model.trim=\"$v.form.email.$model\"\n            :state=\"getValidation('email')\"\n            class=\"rounded-input\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-form-group label-for=\"password\">\n          <label class=\"d-flex justify-content-between\">\n            Senha\n            <small><a href=\"#\">Esqueceu sua senha?</a></small>\n          </label>\n          <b-form-input\n            id=\"password\"\n            type=\"password\"\n            placeholder=\"Digite sua senha\"\n            v-model.trim=\"$v.form.password.$model\"\n            :state=\"getValidation('password')\"\n            class=\"rounded-input\"\n          ></b-form-input>\n        </b-form-group>\n\n        <b-button \n          type=\"button\" \n          variant=\"primary\"  \n          block\n          @click=\"login\"\n          class=\"rounded-button\"\n          ><i class=\"fas fa-sign-in-alt\"></i> Entrar</b-button>\n\n        <hr>\n\n        <b-button \n          type=\"button\" \n          variant=\"outline-secondary\"  \n          block\n          @click=\"goToRegister\"\n          class=\"rounded-button\"\n          ><i class=\"fas fa-user-plus\"></i> Não tenho conta</b-button>\n      </b-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { required, minLength, email } from \"vuelidate/lib/validators\";\nimport UsersModel from \"@/models/UsersModel\";\nimport ToastMixin from \"@/mixins/toastMixin.js\";\n\nexport default {\n  mixins: [ToastMixin],\n\n  data() {\n    return {\n      form: {\n        email: \"\",\n        password: \"\"\n      }\n    }\n  },\n\n  validations: {\n    form: {\n      email: {\n        required, \n        email\n      },\n\n      password: {\n        required,\n        minLength: minLength(6),\n      },\n    },\n  },\n\n  methods: {\n    async login() {\n      this.$v.$touch();\n      if (this.$v.$error) return;\n\n      let user = await UsersModel.params({email: this.form.email}).get();\n\n      if(!user || !user[0] || !user[0].email) {\n        this.showToast(\"danger\", \"Erro!\", \"Usuário e/ou senha incorretos\");\n        this.clearForm();\n        return;\n      }\n\n      user = user[0];\n      if(user.password !== this.form.password) {\n        this.showToast(\"danger\", \"Erro!\", \"Usuário e/ou senha incorretos\");\n        this.clearForm();\n        return;\n      }\n\n      localStorage.setItem('authUser', JSON.stringify(user));\n      this.$router.push({name: \"list\"});\n    },\n\n    clearForm() {\n      this.form = {\n        email: \"\",\n        password: \"\"\n      }\n    },\n\n    getValidation(field) {\n      if (this.$v.form.$dirty === false) {\n        return null;\n      }\n\n      return !this.$v.form[field].$error;\n    },\n\n    goToRegister() {\n      this.$router.push({ name: \"register\" });\n    }\n  },\n}\n</script>\n\n<style>\nbody, html {\n  height: 100%;\n  margin: 0;\n  font-family: Arial, sans-serif;\n}\n\n.login-container {\n  background-color: #f7f9fc;\n  padding: 1rem;\n}\n\n.login-form {\n  background-color: #fff;\n  padding: 2rem;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 450px;\n}\n\nh2 {\n  font-weight: bold;\n  color: #333;\n}\n\nb-form-input, b-button {\n  margin-bottom: 1rem;\n}\n\na {\n  color: #007bff;\n  text-decoration: none;\n}\n\na:hover {\n  text-decoration: underline;\n}\n\n.logo {\n  width: 220px;\n  height: auto;\n}\n\n.rounded-input {\n  border-radius: 12px;\n}\n\n.rounded-button {\n  border-radius: 12px;\n}\n</style>\n"]}]}