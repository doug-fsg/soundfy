{"remainingRequest":"C:\\teste-login\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\teste-login\\src\\views\\List.vue?vue&type=style&index=0&id=20863650&scoped=true&lang=css","dependencies":[{"path":"C:\\teste-login\\src\\views\\List.vue","mtime":1714423561827},{"path":"C:\\teste-login\\node_modules\\css-loader\\dist\\cjs.js","mtime":1713973006512},{"path":"C:\\teste-login\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1713973006268},{"path":"C:\\teste-login\\node_modules\\postcss-loader\\src\\index.js","mtime":1713973005657},{"path":"C:\\teste-login\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713973011099},{"path":"C:\\teste-login\\node_modules\\vue-loader\\lib\\index.js","mtime":1713973005773}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lbXB0eS1kYXRhIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKfQoKLmVtcHR5LWRhdGEtaW1hZ2UgewogIHdpZHRoOiAzMDBweDsKICBoZWlnaHQ6IDMwMHB4Owp9CgouZmluaXNoZWQtdGFzayB7CiAgb3BhY2l0eTogMC43Owp9CgouZmluaXNoZWQtdGFzayA+IC5jYXJkLWJvZHkgPiBoNCwKLmZpbmlzaGVkLXRhc2sgPiAuY2FyZC1ib2R5ID4gcCB7CiAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7Cn0KCi5sb2FkaW5nLXNwaW4gewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBoZWlnaHQ6IDY1dmg7Cn0K"},{"version":3,"sources":["List.vue"],"names":[],"mappings":";AAsSA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container mt-2\">\n    <b-form inline class=\"mb-2\">\n      <b-form-input\n        v-model=\"filter.subject\"\n        id=\"subject\"\n        placeholder=\"pesquisar\"\n        class=\"mr-2\"\n        autocomplete=\"off\"\n      ></b-form-input>\n\n      <b-form-select\n        v-model=\"filter.status\"\n        :options=\"optionsList\"\n        class=\"mr-2\"\n      ></b-form-select>\n\n      <b-button\n        variant=\"outline-secondary\"\n        @click=\"filterTasks\"\n        class=\"mr-2\"\n        v-b-tooltip.hover\n        title=\"Buscar\"\n        ><i class=\"fas fa-search\"></i\n      ></b-button>\n\n      <b-button\n        variant=\"outline-secondary\"\n        @click=\"clearFilter\"\n        class=\"mr-2\"\n        v-b-tooltip.hover\n        title=\"Limpar filtro\"\n        ><i class=\"fas fa-times\"></i\n      ></b-button>\n    </b-form>\n\n    <template v-if=\"isLoading\">\n      <div class=\"loading-spin\">\n        <b-spinner style=\"width: 5rem; height: 5rem\"></b-spinner>\n      </div>\n    </template>\n    <template v-if=\"isTasksEmpty && !isLoading\">\n      <div class=\"empty-data mt-2\">\n        <img src=\"../assets/images/empty-data.svg\" class=\"empty-data-image\" />\n        <b-button variant=\"outline-primary\" class=\"mt-2\" size=\"lg\" to=\"/form\">\n          Criar tarefa\n        </b-button>\n      </div>\n    </template>\n    <template v-if=\"!isTasksEmpty && !isLoading\">\n      <div v-for=\"task in tasks\" :key=\"task.id\">\n        <b-card class=\"mb-2\" :class=\"{ 'finished-task': isFinished(task) }\">\n          <div class=\"d-flex justify-content-between\">\n            <b-card-title>{{ task.subject }}</b-card-title>\n\n            <span>\n              <b-badge\n                :variant=\"variantOverdue(task.dateOverdue, task.status)\"\n                >{{ overduePresenter(task.dateOverdue) }}</b-badge\n              >\n            </span>\n          </div>\n\n          <b-card-text>{{ task.description }}</b-card-text>\n\n          \n          <b-button\n            \n            variant=\"outline-primary\"\n            class=\"mr-2\"\n            @click=\"carragatrack(task.id)\"\n            v-b-tooltip.hover\n            title=\"ir\"\n            size=\"lg\"\n            >\n            <i class=\"fas fa-headphones\"></i>\n          </b-button>\n\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"updateStatus(task.id, status.FINISHED)\"\n            v-b-tooltip.hover\n            title=\"Concluir\"\n          >\n            <i class=\"fas fa-check\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"updateStatus(task.id, status.ARCHIVED)\"\n            v-b-tooltip.hover\n            title=\"Arquivar\"\n          >\n            <i class=\"fas fa-archive\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-secondary\"\n            class=\"mr-2\"\n            @click=\"edit(task.id)\"\n            v-b-tooltip.hover\n            title=\"Editar\"\n          >\n            <i class=\"fas fa-edit\"></i>\n          </b-button>\n          <b-button\n            variant=\"outline-danger\"\n            class=\"mr-2\"\n            @click=\"remove(task.id)\"\n            v-b-tooltip.hover\n            title=\"Excluir\"\n          >\n            <i class=\"fas fa-times\"></i>\n          </b-button>\n        </b-card>\n      </div>\n    </template>\n\n    <b-modal ref=\"modalRemove\" hide-footer title=\"Exclusão de tarefa\">\n      <div class=\"d-block text-center\">\n        Deseja realmente excluir essa tarefa? {{ taskSelected.subject }}\n      </div>\n      <div class=\"mt-3 d-flex justify-content-end\">\n        <b-button variant=\"outline-secondary\" class=\"mr-2\" @click=\"hideModal\">\n          Cancelar\n        </b-button>\n        <b-button\n          variant=\"outline-danger\"\n          class=\"mr-2\"\n          @click=\"confirmRemoveTask\"\n        >\n          Excluir\n        </b-button>\n      </div>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport TasksModel from \"@/models/TasksModel\";\nimport Status from \"@/valueObjects/status\";\nimport ToastMixin from \"@/mixins/toastMixin.js\";\n\nexport default {\n  name: \"List\",\n\n  mixins: [ToastMixin],\n\n  data() {\n    return {\n      tasks: [],\n      taskSelected: [],\n      status: Status,\n      filter: {\n        subject: null,\n        status: null,\n      },\n      optionsList: [\n        { value: null, text: \"Selecione algum status\" },\n        { value: Status.OPEN, text: \"Aberto\" },\n        { value: Status.FINISHED, text: \"Concluído\" },\n        { value: Status.ARCHIVED, text: \"Arquivado\" },\n      ],\n      isLoading: false,\n      statusList: [Status.OPEN, Status.FINISHED],\n    };\n  },\n\n  async created() {\n    this.tasks = await this.getTasks();\n  },\n\n  methods: {\n    edit(taskId) {\n      this.$router.push({ name: \"form\", params: { taskId } });\n    },\n\n    async remove(taskId) {\n      this.taskSelected = await TasksModel.find(taskId);\n      this.$refs.modalRemove.show();\n    },\n\n    hideModal() {\n      this.$refs.modalRemove.hide();\n    },\n\n    async confirmRemoveTask() {\n      this.taskSelected.delete();\n      this.tasks = await this.getTasks();\n      this.hideModal();\n    },\n\n    async carragatrack(taskId) {\n\n      this.showToast(\n        \"success\",\n        \"Abrindo player!\",\n        \"Carregando sua trilha\"\n      );\n      window.location.href = `http://localhost:8080/track?${taskId}`;\n    },\n\n\n    async updateStatus(taskId, status) {\n      let task = await TasksModel.find(taskId);\n      task.status = status;\n      await task.save();\n\n      this.tasks = await this.getTasks();\n      this.showToast(\n        \"success\",\n        \"Sucesso!\",\n        \"Status da tarefa atualizado com suceso\"\n      );\n    },\n\n    isFinished(task) {\n      return task.status === this.status.FINISHED;\n    },\n\n    async filterTasks() {\n      let filter = { ...this.filter };\n      filter = this.clean(filter);\n      filter.userId = JSON.parse(localStorage.getItem(\"authUser\")).id;\n      this.tasks = await TasksModel.params(filter).get();\n    },\n\n    clean(obj) {\n      for (var propName in obj) {\n        if (obj[propName] === null || obj[propName] === undefined) {\n          delete obj[propName];\n        }\n      }\n      return obj;\n    },\n\n    async clearFilter() {\n      this.filter = {\n        subject: null,\n        status: null,\n      };\n      this.tasks = await this.getTasks();\n    },\n\n    overduePresenter(dateOverdue) {\n      if (!dateOverdue) {\n        return;\n      }\n      return dateOverdue.split(\"-\").reverse().join(\"/\");\n    },\n\n    variantOverdue(dateOverdue, taskStatus) {\n      if (!dateOverdue) {\n        return \"light\";\n      }\n\n      if (taskStatus === this.status.FINISHED) {\n        return \"success\";\n      }\n\n      let dateNow = new Date().toISOString().split(\"T\")[0];\n      if (dateOverdue === dateNow) {\n        return \"warning\";\n      }\n\n      if (dateOverdue < dateNow) {\n        return \"danger\";\n      }\n\n      return \"light\";\n    },\n\n    async getTasks() {\n      this.isLoading = true;\n      let self = this;\n      setTimeout(function () {\n        self.isLoading = false;\n      }, 3000);\n      return await TasksModel.params({\n        userId: JSON.parse(localStorage.getItem(\"authUser\")).id,\n        status: this.statusList,\n      }).get();\n    },\n  },\n\n  computed: {\n    isTasksEmpty() {\n      return this.tasks.length === 0;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.empty-data {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.empty-data-image {\n  width: 300px;\n  height: 300px;\n}\n\n.finished-task {\n  opacity: 0.7;\n}\n\n.finished-task > .card-body > h4,\n.finished-task > .card-body > p {\n  text-decoration: line-through;\n}\n\n.loading-spin {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 65vh;\n}\n</style>\n"]}]}