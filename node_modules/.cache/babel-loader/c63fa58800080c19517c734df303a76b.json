{"remainingRequest":"C:\\teste-login\\node_modules\\babel-loader\\lib\\index.js!C:\\teste-login\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\teste-login\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\teste-login\\src\\views\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\teste-login\\src\\views\\Login.vue","mtime":1713816181979},{"path":"C:\\teste-login\\babel.config.js","mtime":1713903577360},{"path":"C:\\teste-login\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713973011099},{"path":"C:\\teste-login\\node_modules\\babel-loader\\lib\\index.js","mtime":1713973011327},{"path":"C:\\teste-login\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1713973011099},{"path":"C:\\teste-login\\node_modules\\vue-loader\\lib\\index.js","mtime":1713973005773}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovdGVzdGUtbG9naW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi90ZXN0ZS1sb2dpbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCB7IHJlcXVpcmVkLCBtaW5MZW5ndGgsIGVtYWlsIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsKaW1wb3J0IFVzZXJzTW9kZWwgZnJvbSAiQC9tb2RlbHMvVXNlcnNNb2RlbCI7CmltcG9ydCBUb2FzdE1peGluIGZyb20gIkAvbWl4aW5zL3RvYXN0TWl4aW4uanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbWl4aW5zOiBbVG9hc3RNaXhpbl0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICBlbWFpbDogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiCiAgICAgIH0KICAgIH07CiAgfSwKICB2YWxpZGF0aW9uczogewogICAgZm9ybTogewogICAgICBlbWFpbDogewogICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZCwKICAgICAgICBlbWFpbDogZW1haWwKICAgICAgfSwKICAgICAgcGFzc3dvcmQ6IHsKICAgICAgICByZXF1aXJlZDogcmVxdWlyZWQsCiAgICAgICAgbWluTGVuZ3RoOiBtaW5MZW5ndGgoNikKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB1c2VyOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzLiR2LiR0b3VjaCgpOwogICAgICAgICAgICAgIGlmICghX3RoaXMuJHYuJGVycm9yKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBVc2Vyc01vZGVsLnBhcmFtcyh7CiAgICAgICAgICAgICAgICBlbWFpbDogX3RoaXMuZm9ybS5lbWFpbAogICAgICAgICAgICAgIH0pLmdldCgpOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgdXNlciA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgaWYgKCEoIXVzZXIgfHwgIXVzZXJbMF0gfHwgIXVzZXJbMF0uZW1haWwpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX3RoaXMuc2hvd1RvYXN0KCJkYW5nZXIiLCAiRXJybyEiLCAiVXN1w6FyaW8gZS9vdSBzZW5oYSBpbmNvcnJldG9zIik7CiAgICAgICAgICAgICAgX3RoaXMuY2xlYXJGb3JtKCk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgdXNlciA9IHVzZXJbMF07CiAgICAgICAgICAgICAgaWYgKCEodXNlci5wYXNzd29yZCAhPT0gX3RoaXMuZm9ybS5wYXNzd29yZCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfdGhpcy5zaG93VG9hc3QoImRhbmdlciIsICJFcnJvISIsICJVc3XDoXJpbyBlL291IHNlbmhhIGluY29ycmV0b3MiKTsKICAgICAgICAgICAgICBfdGhpcy5jbGVhckZvcm0oKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXV0aFVzZXInLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7CiAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6ICJsaXN0IgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNsZWFyRm9ybTogZnVuY3Rpb24gY2xlYXJGb3JtKCkgewogICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIgogICAgICB9OwogICAgfSwKICAgIGdldFZhbGlkYXRpb246IGZ1bmN0aW9uIGdldFZhbGlkYXRpb24oZmllbGQpIHsKICAgICAgaWYgKHRoaXMuJHYuZm9ybS4kZGlydHkgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgcmV0dXJuICF0aGlzLiR2LmZvcm1bZmllbGRdLiRlcnJvcjsKICAgIH0sCiAgICBnb1RvUmVnaXN0ZXI6IGZ1bmN0aW9uIGdvVG9SZWdpc3RlcigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJyZWdpc3RlciIKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["required","minLength","email","UsersModel","ToastMixin","mixins","data","form","password","validations","methods","login","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","user","wrap","_callee$","_context","prev","next","$v","$touch","$error","abrupt","params","get","sent","showToast","clearForm","localStorage","setItem","JSON","stringify","$router","push","name","stop","getValidation","field","$dirty","goToRegister"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\n  <b-row class=\"vh-100 vw-100 row-login\">\n    <b-col sm=\"5\" class=\"d-flex justify-content-center align-items-center left-login\">\n\n      <div class=\"col-8\">\n        <h2 class=\"text-center mb-5 title-login\">Faça o login</h2>\n      <b-form>\n      <b-form-group\n        label=\"E-mail:\"\n        label-for=\"email\"\n      >\n        <b-form-input\n          id=\"email\"\n          type=\"email\"\n          placeholder=\"joaosilva@email.com\"\n          autocomplete=\"off\"\n          v-model.trim=\"$v.form.email.$model\"\n          :state=\"getValidation('email')\"\n        ></b-form-input>\n      </b-form-group>\n\n      <b-form-group label-for=\"password\">\n        <label class=\"d-flex justify-content-between\">\n          Senha\n\n          <small><a href=\"#\">Esqueceu sua senha?</a></small>\n        </label>\n        <b-form-input\n          id=\"password\"\n          type=\"password\"\n          placeholder=\"Digite aqui a sua senha\"\n          v-model.trim=\"$v.form.password.$model\"\n          :state=\"getValidation('password')\"\n        ></b-form-input>\n      </b-form-group>\n\n      <b-button \n        type=\"button\" \n        variant=\"primary\"  \n        block\n        @click=\"login\"\n        ><i class=\"fas fa-sign-in-alt\"></i> Entrar</b-button>\n\n      <hr>\n\n      <b-button \n        type=\"button\" \n        variant=\"outline-secondary\"  \n        block\n        @click=\"goToRegister\"\n        ><i class=\"fas fa-user-plus\"></i> Não tenho conta</b-button>\n    </b-form>\n    </div>\n\n    </b-col>\n    <b-col sm=\"7\" class=\"side-login d-flex justify-content-center align-items-center\">\n      <img src=\"../assets/images/login.svg\" class=\"img-login\" />\n    </b-col>\n  </b-row>\n</template>\n\n<script>\nimport { required, minLength, email } from \"vuelidate/lib/validators\";\nimport UsersModel from \"@/models/UsersModel\";\nimport ToastMixin from \"@/mixins/toastMixin.js\";\n\nexport default {\n  mixins: [ToastMixin],\n\n  data() {\n    return {\n      form: {\n        email: \"\",\n        password: \"\"\n      }\n    }\n  },\n\n  validations: {\n    form: {\n      email: {\n        required, \n        email\n      },\n\n      password: {\n        required,\n        minLength: minLength(6),\n      },\n    },\n  },\n\n  methods: {\n    async login() {\n      this.$v.$touch();\n      if (this.$v.$error) return;\n\n      let user = await UsersModel.params({email: this.form.email}).get();\n\n      if(!user || !user[0] || !user[0].email) {\n        this.showToast(\"danger\", \"Erro!\", \"Usuário e/ou senha incorretos\");\n        this.clearForm();\n        return;\n      }\n\n      user = user[0];\n      if(user.password !== this.form.password) {\n        this.showToast(\"danger\", \"Erro!\", \"Usuário e/ou senha incorretos\");\n        this.clearForm();\n        return;\n      }\n\n      localStorage.setItem('authUser', JSON.stringify(user));\n      this.$router.push({name: \"list\"});\n    },\n\n    clearForm() {\n      this.form = {\n        email: \"\",\n        password: \"\"\n      }\n    },\n\n    getValidation(field) {\n      if (this.$v.form.$dirty === false) {\n        return null;\n      }\n\n      return !this.$v.form[field].$error;\n    },\n\n    goToRegister() {\n      this.$router.push({ name: \"register\" });\n    }\n  },\n}\n</script>\n\n<style>\n*, \n*:after,\n*:before {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    text-decoration: none;\n}\n\n.row-login {\n  margin-left: 0 !important;\n}\n\n.img-login {\n  width: 600px;\n  height: 600px;\n}\n\n.left-login {\n  background-color: #f2f2f2;\n}\n\n.title-login {\n  font-weight: bold;\n}\n</style>\n"],"mappings":";;;;AA8DA,SAAAA,QAAA,EAAAC,SAAA,EAAAC,KAAA;AACA,OAAAC,UAAA;AACA,OAAAC,UAAA;AAEA;EACAC,MAAA,GAAAD,UAAA;EAEAE,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;QACAL,KAAA;QACAM,QAAA;MACA;IACA;EACA;EAEAC,WAAA;IACAF,IAAA;MACAL,KAAA;QACAF,QAAA,EAAAA,QAAA;QACAE,KAAA,EAAAA;MACA;MAEAM,QAAA;QACAR,QAAA,EAAAA,QAAA;QACAC,SAAA,EAAAA,SAAA;MACA;IACA;EACA;EAEAS,OAAA;IACAC,KAAA,WAAAA,MAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,IAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACAV,KAAA,CAAAW,EAAA,CAAAC,MAAA;cAAA,KACAZ,KAAA,CAAAW,EAAA,CAAAE,MAAA;gBAAAL,QAAA,CAAAE,IAAA;gBAAA;cAAA;cAAA,OAAAF,QAAA,CAAAM,MAAA;YAAA;cAAAN,QAAA,CAAAE,IAAA;cAAA,OAEAnB,UAAA,CAAAwB,MAAA;gBAAAzB,KAAA,EAAAU,KAAA,CAAAL,IAAA,CAAAL;cAAA,GAAA0B,GAAA;YAAA;cAAAX,IAAA,GAAAG,QAAA,CAAAS,IAAA;cAAA,MAEA,CAAAZ,IAAA,KAAAA,IAAA,QAAAA,IAAA,IAAAf,KAAA;gBAAAkB,QAAA,CAAAE,IAAA;gBAAA;cAAA;cACAV,KAAA,CAAAkB,SAAA;cACAlB,KAAA,CAAAmB,SAAA;cAAA,OAAAX,QAAA,CAAAM,MAAA;YAAA;cAIAT,IAAA,GAAAA,IAAA;cAAA,MACAA,IAAA,CAAAT,QAAA,KAAAI,KAAA,CAAAL,IAAA,CAAAC,QAAA;gBAAAY,QAAA,CAAAE,IAAA;gBAAA;cAAA;cACAV,KAAA,CAAAkB,SAAA;cACAlB,KAAA,CAAAmB,SAAA;cAAA,OAAAX,QAAA,CAAAM,MAAA;YAAA;cAIAM,YAAA,CAAAC,OAAA,aAAAC,IAAA,CAAAC,SAAA,CAAAlB,IAAA;cACAL,KAAA,CAAAwB,OAAA,CAAAC,IAAA;gBAAAC,IAAA;cAAA;YAAA;YAAA;cAAA,OAAAlB,QAAA,CAAAmB,IAAA;UAAA;QAAA,GAAAvB,OAAA;MAAA;IACA;IAEAe,SAAA,WAAAA,UAAA;MACA,KAAAxB,IAAA;QACAL,KAAA;QACAM,QAAA;MACA;IACA;IAEAgC,aAAA,WAAAA,cAAAC,KAAA;MACA,SAAAlB,EAAA,CAAAhB,IAAA,CAAAmC,MAAA;QACA;MACA;MAEA,aAAAnB,EAAA,CAAAhB,IAAA,CAAAkC,KAAA,EAAAhB,MAAA;IACA;IAEAkB,YAAA,WAAAA,aAAA;MACA,KAAAP,OAAA,CAAAC,IAAA;QAAAC,IAAA;MAAA;IACA;EACA;AACA","ignoreList":[]}]}